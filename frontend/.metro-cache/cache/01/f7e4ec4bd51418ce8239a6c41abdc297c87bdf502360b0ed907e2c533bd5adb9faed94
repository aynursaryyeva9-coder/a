{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":38,"index":198}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('vitamed_token');\n        if (storedToken) {\n          const response = await _servicesApi.api.get(`/auth/me?token=${storedToken}`);\n          setUser(response.data);\n          setToken(storedToken);\n        }\n      } catch (error) {\n        console.log('No stored auth or invalid token');\n        await AsyncStorage.default.removeItem('vitamed_token');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const sendVerificationCode = async phone => {\n      const response = await _servicesApi.api.post('/auth/send-code', {\n        phone\n      });\n      return response.data.demo_code; // Only for demo\n    };\n    const verifyCode = async (phone, code) => {\n      const response = await _servicesApi.api.post('/auth/verify-code', {\n        phone,\n        code\n      });\n      return response.data.verified;\n    };\n    const login = async (phone, password) => {\n      const response = await _servicesApi.api.post('/auth/login', {\n        phone,\n        password\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('vitamed_token', access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const register = async (phone, password, name) => {\n      const response = await _servicesApi.api.post('/auth/register', {\n        phone,\n        password,\n        name\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('vitamed_token', access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('vitamed_token');\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        register,\n        logout,\n        sendVerificationCode,\n        verifyCode\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":115,"map":[[13,2,25,0,"exports"],[13,9,25,0],[13,10,25,0,"AuthProvider"],[13,22,25,0],[13,25,25,0,"AuthProvider"],[13,37,25,0],[14,2,100,0,"exports"],[14,9,100,0],[14,10,100,0,"useAuth"],[14,17,100,0],[14,20,100,0,"useAuth"],[14,27,100,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_servicesApi"],[18,18,3,0],[18,21,3,0,"require"],[18,28,3,0],[18,29,3,0,"_dependencyMap"],[18,43,3,0],[19,2,3,38],[19,6,3,38,"_reactJsxDevRuntime"],[19,25,3,38],[19,28,3,38,"require"],[19,35,3,38],[19,36,3,38,"_dependencyMap"],[19,50,3,38],[20,2,23,0],[20,8,23,6,"AuthContext"],[20,19,23,17],[20,35,23,20],[20,39,23,20,"createContext"],[20,45,23,33],[20,46,23,33,"createContext"],[20,59,23,33],[20,61,23,63,"undefined"],[20,70,23,72],[20,71,23,73],[21,2,25,7],[21,11,25,16,"AuthProvider"],[21,23,25,28,"AuthProvider"],[21,24,25,29],[22,4,25,31,"children"],[23,2,25,65],[23,3,25,66],[23,5,25,68],[24,4,26,2],[24,10,26,8],[24,11,26,9,"user"],[24,15,26,13],[24,17,26,15,"setUser"],[24,24,26,22],[24,25,26,23],[24,28,26,26],[24,32,26,26,"useState"],[24,38,26,34],[24,39,26,34,"useState"],[24,47,26,34],[24,49,26,48],[24,53,26,52],[24,54,26,53],[25,4,27,2],[25,10,27,8],[25,11,27,9,"token"],[25,16,27,14],[25,18,27,16,"setToken"],[25,26,27,24],[25,27,27,25],[25,30,27,28],[25,34,27,28,"useState"],[25,40,27,36],[25,41,27,36,"useState"],[25,49,27,36],[25,51,27,52],[25,55,27,56],[25,56,27,57],[26,4,28,2],[26,10,28,8],[26,11,28,9,"isLoading"],[26,20,28,18],[26,22,28,20,"setIsLoading"],[26,34,28,32],[26,35,28,33],[26,38,28,36],[26,42,28,36,"useState"],[26,48,28,44],[26,49,28,44,"useState"],[26,57,28,44],[26,59,28,45],[26,63,28,49],[26,64,28,50],[27,4,30,2],[27,8,30,2,"useEffect"],[27,14,30,11],[27,15,30,11,"useEffect"],[27,24,30,11],[27,26,30,12],[27,32,30,18],[28,6,31,4,"loadStoredAuth"],[28,20,31,18],[28,21,31,19],[28,22,31,20],[29,4,32,2],[29,5,32,3],[29,7,32,5],[29,9,32,7],[29,10,32,8],[30,4,34,2],[30,10,34,8,"loadStoredAuth"],[30,24,34,22],[30,27,34,25],[30,33,34,25,"loadStoredAuth"],[30,34,34,25],[30,39,34,37],[31,6,35,4],[31,10,35,8],[32,8,36,6],[32,14,36,12,"storedToken"],[32,25,36,23],[32,28,36,26],[32,34,36,32,"AsyncStorage"],[32,46,36,44],[32,47,36,44,"default"],[32,54,36,44],[32,55,36,45,"getItem"],[32,62,36,52],[32,63,36,53],[32,78,36,68],[32,79,36,69],[33,8,37,6],[33,12,37,10,"storedToken"],[33,23,37,21],[33,25,37,23],[34,10,38,8],[34,16,38,14,"response"],[34,24,38,22],[34,27,38,25],[34,33,38,31,"api"],[34,45,38,34],[34,46,38,34,"api"],[34,49,38,34],[34,50,38,35,"get"],[34,53,38,38],[34,54,38,39],[34,72,38,57,"storedToken"],[34,83,38,68],[34,85,38,70],[34,86,38,71],[35,10,39,8,"setUser"],[35,17,39,15],[35,18,39,16,"response"],[35,26,39,24],[35,27,39,25,"data"],[35,31,39,29],[35,32,39,30],[36,10,40,8,"setToken"],[36,18,40,16],[36,19,40,17,"storedToken"],[36,30,40,28],[36,31,40,29],[37,8,41,6],[38,6,42,4],[38,7,42,5],[38,8,42,6],[38,15,42,13,"error"],[38,20,42,18],[38,22,42,20],[39,8,43,6,"console"],[39,15,43,13],[39,16,43,14,"log"],[39,19,43,17],[39,20,43,18],[39,53,43,51],[39,54,43,52],[40,8,44,6],[40,14,44,12,"AsyncStorage"],[40,26,44,24],[40,27,44,24,"default"],[40,34,44,24],[40,35,44,25,"removeItem"],[40,45,44,35],[40,46,44,36],[40,61,44,51],[40,62,44,52],[41,6,45,4],[41,7,45,5],[41,16,45,14],[42,8,46,6,"setIsLoading"],[42,20,46,18],[42,21,46,19],[42,26,46,24],[42,27,46,25],[43,6,47,4],[44,4,48,2],[44,5,48,3],[45,4,50,2],[45,10,50,8,"sendVerificationCode"],[45,30,50,28],[45,33,50,31],[45,39,50,38,"phone"],[45,44,50,51],[45,48,50,73],[46,6,51,4],[46,12,51,10,"response"],[46,20,51,18],[46,23,51,21],[46,29,51,27,"api"],[46,41,51,30],[46,42,51,30,"api"],[46,45,51,30],[46,46,51,31,"post"],[46,50,51,35],[46,51,51,36],[46,68,51,53],[46,70,51,55],[47,8,51,57,"phone"],[48,6,51,63],[48,7,51,64],[48,8,51,65],[49,6,52,4],[49,13,52,11,"response"],[49,21,52,19],[49,22,52,20,"data"],[49,26,52,24],[49,27,52,25,"demo_code"],[49,36,52,34],[49,37,52,35],[49,38,52,36],[50,4,53,2],[50,5,53,3],[51,4,55,2],[51,10,55,8,"verifyCode"],[51,20,55,18],[51,23,55,21],[51,29,55,21,"verifyCode"],[51,30,55,28,"phone"],[51,35,55,41],[51,37,55,43,"code"],[51,41,55,55],[51,46,55,78],[52,6,56,4],[52,12,56,10,"response"],[52,20,56,18],[52,23,56,21],[52,29,56,27,"api"],[52,41,56,30],[52,42,56,30,"api"],[52,45,56,30],[52,46,56,31,"post"],[52,50,56,35],[52,51,56,36],[52,70,56,55],[52,72,56,57],[53,8,56,59,"phone"],[53,13,56,64],[54,8,56,66,"code"],[55,6,56,71],[55,7,56,72],[55,8,56,73],[56,6,57,4],[56,13,57,11,"response"],[56,21,57,19],[56,22,57,20,"data"],[56,26,57,24],[56,27,57,25,"verified"],[56,35,57,33],[57,4,58,2],[57,5,58,3],[58,4,60,2],[58,10,60,8,"login"],[58,15,60,13],[58,18,60,16],[58,24,60,16,"login"],[58,25,60,23,"phone"],[58,30,60,36],[58,32,60,38,"password"],[58,40,60,54],[58,45,60,59],[59,6,61,4],[59,12,61,10,"response"],[59,20,61,18],[59,23,61,21],[59,29,61,27,"api"],[59,41,61,30],[59,42,61,30,"api"],[59,45,61,30],[59,46,61,31,"post"],[59,50,61,35],[59,51,61,36],[59,64,61,49],[59,66,61,51],[60,8,61,53,"phone"],[60,13,61,58],[61,8,61,60,"password"],[62,6,61,69],[62,7,61,70],[62,8,61,71],[63,6,62,4],[63,12,62,10],[64,8,62,12,"access_token"],[64,20,62,24],[65,8,62,26,"user"],[65,12,62,30],[65,14,62,32,"userData"],[66,6,62,41],[66,7,62,42],[66,10,62,45,"response"],[66,18,62,53],[66,19,62,54,"data"],[66,23,62,58],[67,6,63,4],[67,12,63,10,"AsyncStorage"],[67,24,63,22],[67,25,63,22,"default"],[67,32,63,22],[67,33,63,23,"setItem"],[67,40,63,30],[67,41,63,31],[67,56,63,46],[67,58,63,48,"access_token"],[67,70,63,60],[67,71,63,61],[68,6,64,4,"setToken"],[68,14,64,12],[68,15,64,13,"access_token"],[68,27,64,25],[68,28,64,26],[69,6,65,4,"setUser"],[69,13,65,11],[69,14,65,12,"userData"],[69,22,65,20],[69,23,65,21],[70,4,66,2],[70,5,66,3],[71,4,68,2],[71,10,68,8,"register"],[71,18,68,16],[71,21,68,19],[71,27,68,19,"register"],[71,28,68,26,"phone"],[71,33,68,39],[71,35,68,41,"password"],[71,43,68,57],[71,45,68,59,"name"],[71,49,68,71],[71,54,68,76],[72,6,69,4],[72,12,69,10,"response"],[72,20,69,18],[72,23,69,21],[72,29,69,27,"api"],[72,41,69,30],[72,42,69,30,"api"],[72,45,69,30],[72,46,69,31,"post"],[72,50,69,35],[72,51,69,36],[72,67,69,52],[72,69,69,54],[73,8,69,56,"phone"],[73,13,69,61],[74,8,69,63,"password"],[74,16,69,71],[75,8,69,73,"name"],[76,6,69,78],[76,7,69,79],[76,8,69,80],[77,6,70,4],[77,12,70,10],[78,8,70,12,"access_token"],[78,20,70,24],[79,8,70,26,"user"],[79,12,70,30],[79,14,70,32,"userData"],[80,6,70,41],[80,7,70,42],[80,10,70,45,"response"],[80,18,70,53],[80,19,70,54,"data"],[80,23,70,58],[81,6,71,4],[81,12,71,10,"AsyncStorage"],[81,24,71,22],[81,25,71,22,"default"],[81,32,71,22],[81,33,71,23,"setItem"],[81,40,71,30],[81,41,71,31],[81,56,71,46],[81,58,71,48,"access_token"],[81,70,71,60],[81,71,71,61],[82,6,72,4,"setToken"],[82,14,72,12],[82,15,72,13,"access_token"],[82,27,72,25],[82,28,72,26],[83,6,73,4,"setUser"],[83,13,73,11],[83,14,73,12,"userData"],[83,22,73,20],[83,23,73,21],[84,4,74,2],[84,5,74,3],[85,4,76,2],[85,10,76,8,"logout"],[85,16,76,14],[85,19,76,17],[85,25,76,17,"logout"],[85,26,76,17],[85,31,76,29],[86,6,77,4],[86,12,77,10,"AsyncStorage"],[86,24,77,22],[86,25,77,22,"default"],[86,32,77,22],[86,33,77,23,"removeItem"],[86,43,77,33],[86,44,77,34],[86,59,77,49],[86,60,77,50],[87,6,78,4,"setToken"],[87,14,78,12],[87,15,78,13],[87,19,78,17],[87,20,78,18],[88,6,79,4,"setUser"],[88,13,79,11],[88,14,79,12],[88,18,79,16],[88,19,79,17],[89,4,80,2],[89,5,80,3],[90,4,82,2],[90,24,83,4],[90,28,83,4,"_reactJsxDevRuntime"],[90,47,83,4],[90,48,83,4,"jsxDEV"],[90,54,83,4],[90,56,83,5,"AuthContext"],[90,67,83,16],[90,68,83,17,"Provider"],[90,76,83,25],[91,6,84,6,"value"],[91,11,84,11],[91,13,84,13],[92,8,85,8,"user"],[92,12,85,12],[93,8,86,8,"token"],[93,13,86,13],[94,8,87,8,"isLoading"],[94,17,87,17],[95,8,88,8,"login"],[95,13,88,13],[96,8,89,8,"register"],[96,16,89,16],[97,8,90,8,"logout"],[97,14,90,14],[98,8,91,8,"sendVerificationCode"],[98,28,91,28],[99,8,92,8,"verifyCode"],[100,6,93,6],[100,7,93,8],[101,6,93,8,"children"],[101,14,93,8],[101,16,95,7,"children"],[102,4,95,15],[103,6,95,15,"fileName"],[103,14,95,15],[103,16,95,15,"_jsxFileName"],[103,28,95,15],[104,6,95,15,"lineNumber"],[104,16,95,15],[105,6,95,15,"columnNumber"],[105,18,95,15],[106,4,95,15],[106,11,96,26],[106,12,96,27],[107,2,98,0],[108,2,100,7],[108,11,100,16,"useAuth"],[108,18,100,23,"useAuth"],[108,19,100,23],[108,21,100,26],[109,4,101,2],[109,10,101,8,"context"],[109,17,101,15],[109,20,101,18],[109,24,101,18,"useContext"],[109,30,101,28],[109,31,101,28,"useContext"],[109,41,101,28],[109,43,101,29,"AuthContext"],[109,54,101,40],[109,55,101,41],[110,4,102,2],[110,8,102,6,"context"],[110,15,102,13],[110,20,102,18,"undefined"],[110,29,102,27],[110,31,102,29],[111,6,103,4],[111,12,103,10],[111,16,103,14,"Error"],[111,21,103,19],[111,22,103,20],[111,67,103,65],[111,68,103,66],[112,4,104,2],[113,4,105,2],[113,11,105,9,"context"],[113,18,105,16],[114,2,106,0],[115,0,106,1],[115,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","sendVerificationCode","verifyCode","login","register","logout","useAuth"],"mappings":"AAA;OCwB;YCK;GDE;yBEE;GFc;+BGE;GHG;qBIE;GJG;gBKE;GLM;mBME;GNM;iBOE;GPI;CDkB;OSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}