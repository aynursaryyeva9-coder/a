{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":38,"index":198}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('vitamed_token');\n        if (storedToken) {\n          const response = await _servicesApi.api.get(`/auth/me?token=${storedToken}`);\n          setUser(response.data);\n          setToken(storedToken);\n        }\n      } catch (error) {\n        console.log('No stored auth or invalid token');\n        await AsyncStorage.default.removeItem('vitamed_token');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const sendVerificationCode = async phone => {\n      const response = await _servicesApi.api.post('/auth/send-code', {\n        phone\n      });\n      return response.data.demo_code; // Only for demo\n    };\n    const verifyCode = async (phone, code) => {\n      const response = await _servicesApi.api.post('/auth/verify-code', {\n        phone,\n        code\n      });\n      return response.data.verified;\n    };\n    const login = async (phone, password) => {\n      const response = await _servicesApi.api.post('/auth/login', {\n        phone,\n        password\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('vitamed_token', access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const register = async (phone, password, name) => {\n      const response = await _servicesApi.api.post('/auth/register', {\n        phone,\n        password,\n        name\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('vitamed_token', access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('vitamed_token');\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        register,\n        logout,\n        sendVerificationCode,\n        verifyCode\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":124,"map":[[15,2,25,0,"exports"],[15,9,25,0],[15,10,25,0,"AuthProvider"],[15,22,25,0],[15,25,25,0,"AuthProvider"],[15,37,25,0],[16,2,100,0,"exports"],[16,9,100,0],[16,10,100,0,"useAuth"],[16,17,100,0],[16,20,100,0,"useAuth"],[16,27,100,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_servicesApi"],[20,18,3,0],[20,21,3,0,"require"],[20,28,3,0],[20,29,3,0,"_dependencyMap"],[20,43,3,0],[21,2,3,38],[21,6,3,38,"_reactJsxDevRuntime"],[21,25,3,38],[21,28,3,38,"require"],[21,35,3,38],[21,36,3,38,"_dependencyMap"],[21,50,3,38],[22,2,23,0],[22,8,23,6,"AuthContext"],[22,19,23,17],[22,35,23,20],[22,39,23,20,"createContext"],[22,45,23,33],[22,46,23,33,"createContext"],[22,59,23,33],[22,61,23,63,"undefined"],[22,70,23,72],[22,71,23,73],[23,2,25,7],[23,11,25,16,"AuthProvider"],[23,23,25,28,"AuthProvider"],[23,24,25,29],[24,4,25,31,"children"],[25,2,25,65],[25,3,25,66],[25,5,25,68],[26,4,25,68,"_s"],[26,6,25,68],[27,4,26,2],[27,10,26,8],[27,11,26,9,"user"],[27,15,26,13],[27,17,26,15,"setUser"],[27,24,26,22],[27,25,26,23],[27,28,26,26],[27,32,26,26,"useState"],[27,38,26,34],[27,39,26,34,"useState"],[27,47,26,34],[27,49,26,48],[27,53,26,52],[27,54,26,53],[28,4,27,2],[28,10,27,8],[28,11,27,9,"token"],[28,16,27,14],[28,18,27,16,"setToken"],[28,26,27,24],[28,27,27,25],[28,30,27,28],[28,34,27,28,"useState"],[28,40,27,36],[28,41,27,36,"useState"],[28,49,27,36],[28,51,27,52],[28,55,27,56],[28,56,27,57],[29,4,28,2],[29,10,28,8],[29,11,28,9,"isLoading"],[29,20,28,18],[29,22,28,20,"setIsLoading"],[29,34,28,32],[29,35,28,33],[29,38,28,36],[29,42,28,36,"useState"],[29,48,28,44],[29,49,28,44,"useState"],[29,57,28,44],[29,59,28,45],[29,63,28,49],[29,64,28,50],[30,4,30,2],[30,8,30,2,"useEffect"],[30,14,30,11],[30,15,30,11,"useEffect"],[30,24,30,11],[30,26,30,12],[30,32,30,18],[31,6,31,4,"loadStoredAuth"],[31,20,31,18],[31,21,31,19],[31,22,31,20],[32,4,32,2],[32,5,32,3],[32,7,32,5],[32,9,32,7],[32,10,32,8],[33,4,34,2],[33,10,34,8,"loadStoredAuth"],[33,24,34,22],[33,27,34,25],[33,33,34,25,"loadStoredAuth"],[33,34,34,25],[33,39,34,37],[34,6,35,4],[34,10,35,8],[35,8,36,6],[35,14,36,12,"storedToken"],[35,25,36,23],[35,28,36,26],[35,34,36,32,"AsyncStorage"],[35,46,36,44],[35,47,36,44,"default"],[35,54,36,44],[35,55,36,45,"getItem"],[35,62,36,52],[35,63,36,53],[35,78,36,68],[35,79,36,69],[36,8,37,6],[36,12,37,10,"storedToken"],[36,23,37,21],[36,25,37,23],[37,10,38,8],[37,16,38,14,"response"],[37,24,38,22],[37,27,38,25],[37,33,38,31,"api"],[37,45,38,34],[37,46,38,34,"api"],[37,49,38,34],[37,50,38,35,"get"],[37,53,38,38],[37,54,38,39],[37,72,38,57,"storedToken"],[37,83,38,68],[37,85,38,70],[37,86,38,71],[38,10,39,8,"setUser"],[38,17,39,15],[38,18,39,16,"response"],[38,26,39,24],[38,27,39,25,"data"],[38,31,39,29],[38,32,39,30],[39,10,40,8,"setToken"],[39,18,40,16],[39,19,40,17,"storedToken"],[39,30,40,28],[39,31,40,29],[40,8,41,6],[41,6,42,4],[41,7,42,5],[41,8,42,6],[41,15,42,13,"error"],[41,20,42,18],[41,22,42,20],[42,8,43,6,"console"],[42,15,43,13],[42,16,43,14,"log"],[42,19,43,17],[42,20,43,18],[42,53,43,51],[42,54,43,52],[43,8,44,6],[43,14,44,12,"AsyncStorage"],[43,26,44,24],[43,27,44,24,"default"],[43,34,44,24],[43,35,44,25,"removeItem"],[43,45,44,35],[43,46,44,36],[43,61,44,51],[43,62,44,52],[44,6,45,4],[44,7,45,5],[44,16,45,14],[45,8,46,6,"setIsLoading"],[45,20,46,18],[45,21,46,19],[45,26,46,24],[45,27,46,25],[46,6,47,4],[47,4,48,2],[47,5,48,3],[48,4,50,2],[48,10,50,8,"sendVerificationCode"],[48,30,50,28],[48,33,50,31],[48,39,50,38,"phone"],[48,44,50,51],[48,48,50,73],[49,6,51,4],[49,12,51,10,"response"],[49,20,51,18],[49,23,51,21],[49,29,51,27,"api"],[49,41,51,30],[49,42,51,30,"api"],[49,45,51,30],[49,46,51,31,"post"],[49,50,51,35],[49,51,51,36],[49,68,51,53],[49,70,51,55],[50,8,51,57,"phone"],[51,6,51,63],[51,7,51,64],[51,8,51,65],[52,6,52,4],[52,13,52,11,"response"],[52,21,52,19],[52,22,52,20,"data"],[52,26,52,24],[52,27,52,25,"demo_code"],[52,36,52,34],[52,37,52,35],[52,38,52,36],[53,4,53,2],[53,5,53,3],[54,4,55,2],[54,10,55,8,"verifyCode"],[54,20,55,18],[54,23,55,21],[54,29,55,21,"verifyCode"],[54,30,55,28,"phone"],[54,35,55,41],[54,37,55,43,"code"],[54,41,55,55],[54,46,55,78],[55,6,56,4],[55,12,56,10,"response"],[55,20,56,18],[55,23,56,21],[55,29,56,27,"api"],[55,41,56,30],[55,42,56,30,"api"],[55,45,56,30],[55,46,56,31,"post"],[55,50,56,35],[55,51,56,36],[55,70,56,55],[55,72,56,57],[56,8,56,59,"phone"],[56,13,56,64],[57,8,56,66,"code"],[58,6,56,71],[58,7,56,72],[58,8,56,73],[59,6,57,4],[59,13,57,11,"response"],[59,21,57,19],[59,22,57,20,"data"],[59,26,57,24],[59,27,57,25,"verified"],[59,35,57,33],[60,4,58,2],[60,5,58,3],[61,4,60,2],[61,10,60,8,"login"],[61,15,60,13],[61,18,60,16],[61,24,60,16,"login"],[61,25,60,23,"phone"],[61,30,60,36],[61,32,60,38,"password"],[61,40,60,54],[61,45,60,59],[62,6,61,4],[62,12,61,10,"response"],[62,20,61,18],[62,23,61,21],[62,29,61,27,"api"],[62,41,61,30],[62,42,61,30,"api"],[62,45,61,30],[62,46,61,31,"post"],[62,50,61,35],[62,51,61,36],[62,64,61,49],[62,66,61,51],[63,8,61,53,"phone"],[63,13,61,58],[64,8,61,60,"password"],[65,6,61,69],[65,7,61,70],[65,8,61,71],[66,6,62,4],[66,12,62,10],[67,8,62,12,"access_token"],[67,20,62,24],[68,8,62,26,"user"],[68,12,62,30],[68,14,62,32,"userData"],[69,6,62,41],[69,7,62,42],[69,10,62,45,"response"],[69,18,62,53],[69,19,62,54,"data"],[69,23,62,58],[70,6,63,4],[70,12,63,10,"AsyncStorage"],[70,24,63,22],[70,25,63,22,"default"],[70,32,63,22],[70,33,63,23,"setItem"],[70,40,63,30],[70,41,63,31],[70,56,63,46],[70,58,63,48,"access_token"],[70,70,63,60],[70,71,63,61],[71,6,64,4,"setToken"],[71,14,64,12],[71,15,64,13,"access_token"],[71,27,64,25],[71,28,64,26],[72,6,65,4,"setUser"],[72,13,65,11],[72,14,65,12,"userData"],[72,22,65,20],[72,23,65,21],[73,4,66,2],[73,5,66,3],[74,4,68,2],[74,10,68,8,"register"],[74,18,68,16],[74,21,68,19],[74,27,68,19,"register"],[74,28,68,26,"phone"],[74,33,68,39],[74,35,68,41,"password"],[74,43,68,57],[74,45,68,59,"name"],[74,49,68,71],[74,54,68,76],[75,6,69,4],[75,12,69,10,"response"],[75,20,69,18],[75,23,69,21],[75,29,69,27,"api"],[75,41,69,30],[75,42,69,30,"api"],[75,45,69,30],[75,46,69,31,"post"],[75,50,69,35],[75,51,69,36],[75,67,69,52],[75,69,69,54],[76,8,69,56,"phone"],[76,13,69,61],[77,8,69,63,"password"],[77,16,69,71],[78,8,69,73,"name"],[79,6,69,78],[79,7,69,79],[79,8,69,80],[80,6,70,4],[80,12,70,10],[81,8,70,12,"access_token"],[81,20,70,24],[82,8,70,26,"user"],[82,12,70,30],[82,14,70,32,"userData"],[83,6,70,41],[83,7,70,42],[83,10,70,45,"response"],[83,18,70,53],[83,19,70,54,"data"],[83,23,70,58],[84,6,71,4],[84,12,71,10,"AsyncStorage"],[84,24,71,22],[84,25,71,22,"default"],[84,32,71,22],[84,33,71,23,"setItem"],[84,40,71,30],[84,41,71,31],[84,56,71,46],[84,58,71,48,"access_token"],[84,70,71,60],[84,71,71,61],[85,6,72,4,"setToken"],[85,14,72,12],[85,15,72,13,"access_token"],[85,27,72,25],[85,28,72,26],[86,6,73,4,"setUser"],[86,13,73,11],[86,14,73,12,"userData"],[86,22,73,20],[86,23,73,21],[87,4,74,2],[87,5,74,3],[88,4,76,2],[88,10,76,8,"logout"],[88,16,76,14],[88,19,76,17],[88,25,76,17,"logout"],[88,26,76,17],[88,31,76,29],[89,6,77,4],[89,12,77,10,"AsyncStorage"],[89,24,77,22],[89,25,77,22,"default"],[89,32,77,22],[89,33,77,23,"removeItem"],[89,43,77,33],[89,44,77,34],[89,59,77,49],[89,60,77,50],[90,6,78,4,"setToken"],[90,14,78,12],[90,15,78,13],[90,19,78,17],[90,20,78,18],[91,6,79,4,"setUser"],[91,13,79,11],[91,14,79,12],[91,18,79,16],[91,19,79,17],[92,4,80,2],[92,5,80,3],[93,4,82,2],[93,24,83,4],[93,28,83,4,"_reactJsxDevRuntime"],[93,47,83,4],[93,48,83,4,"jsxDEV"],[93,54,83,4],[93,56,83,5,"AuthContext"],[93,67,83,16],[93,68,83,17,"Provider"],[93,76,83,25],[94,6,84,6,"value"],[94,11,84,11],[94,13,84,13],[95,8,85,8,"user"],[95,12,85,12],[96,8,86,8,"token"],[96,13,86,13],[97,8,87,8,"isLoading"],[97,17,87,17],[98,8,88,8,"login"],[98,13,88,13],[99,8,89,8,"register"],[99,16,89,16],[100,8,90,8,"logout"],[100,14,90,14],[101,8,91,8,"sendVerificationCode"],[101,28,91,28],[102,8,92,8,"verifyCode"],[103,6,93,6],[103,7,93,8],[104,6,93,8,"children"],[104,14,93,8],[104,16,95,7,"children"],[105,4,95,15],[106,6,95,15,"fileName"],[106,14,95,15],[106,16,95,15,"_jsxFileName"],[106,28,95,15],[107,6,95,15,"lineNumber"],[107,16,95,15],[108,6,95,15,"columnNumber"],[108,18,95,15],[109,4,95,15],[109,11,96,26],[109,12,96,27],[110,2,98,0],[111,2,98,1,"_s"],[111,4,98,1],[111,5,25,16,"AuthProvider"],[111,17,25,28],[112,2,25,28,"_c"],[112,4,25,28],[112,7,25,16,"AuthProvider"],[112,19,25,28],[113,2,100,7],[113,11,100,16,"useAuth"],[113,18,100,23,"useAuth"],[113,19,100,23],[113,21,100,26],[114,4,100,26,"_s2"],[114,7,100,26],[115,4,101,2],[115,10,101,8,"context"],[115,17,101,15],[115,20,101,18],[115,24,101,18,"useContext"],[115,30,101,28],[115,31,101,28,"useContext"],[115,41,101,28],[115,43,101,29,"AuthContext"],[115,54,101,40],[115,55,101,41],[116,4,102,2],[116,8,102,6,"context"],[116,15,102,13],[116,20,102,18,"undefined"],[116,29,102,27],[116,31,102,29],[117,6,103,4],[117,12,103,10],[117,16,103,14,"Error"],[117,21,103,19],[117,22,103,20],[117,67,103,65],[117,68,103,66],[118,4,104,2],[119,4,105,2],[119,11,105,9,"context"],[119,18,105,16],[120,2,106,0],[121,2,106,1,"_s2"],[121,5,106,1],[121,6,100,16,"useAuth"],[121,13,100,23],[122,2,100,23],[122,6,100,23,"_c"],[122,8,100,23],[123,2,100,23,"$RefreshReg$"],[123,14,100,23],[123,15,100,23,"_c"],[123,17,100,23],[124,0,100,23],[124,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","sendVerificationCode","verifyCode","login","register","logout","useAuth"],"mappings":"AAA;OCwB;YCK;GDE;yBEE;GFc;+BGE;GHG;qBIE;GJG;gBKE;GLM;mBME;GNM;iBOE;GPI;CDkB;OSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}